device: cuda
dtype: float32
autocast: true
autocast_dtype: bfloat16
seed: 2036
show: false
continue_from: null
execute_only: null
execute_inplace: false
benchmark_no_load: false
efficient_attention_backend: torch
num_threads: 8
mp_start_method: spawn
label: null
logging:
  level: INFO
  log_updates: 10
  log_tensorboard: false
  log_wandb: false
tensorboard:
  with_media_logging: false
  name: null
  sub_dir: null
wandb:
  with_media_logging: true
  project: null
  name: null
  group: null
slurm:
  gpus: 4
  mem_per_gpu: 40
  time: 3600
  constraint: null
  partition: null
  comment: null
  setup: []
  exclude: ''
dora:
  dir: /checkpoint/${oc.env:USER}/experiments/audiocraft/outputs
  exclude:
  - device
  - wandb.*
  - tensorboard.*
  - logging.*
  - dataset.num_workers
  - eval.num_workers
  - special.*
  - metrics.visqol.bin
  - metrics.fad.bin
  - execute_only
  - execute_best
  - generate.every
  - optim.eager_sync
  - profiler.*
  - deadlock.*
  - efficient_attention_backend
  - num_threads
  - mp_start_method
  use_rendezvous: false
  git_save: true
datasource:
  max_sample_rate: 32000
  max_channels: 1
  train: /root/workspace/data/fma_small_mini/egs/train
  valid: /root/workspace/data/fma_small_mini/egs/valid
  evaluate: /root/workspace/data/fma_small_mini/egs/valid
  generate: /root/workspace/data/fma_small_mini/egs/valid
solver: compression
fsdp:
  use: false
  param_dtype: float16
  reduce_dtype: float32
  buffer_dtype: float32
  sharding_strategy: shard_grad_op
  per_block: true
profiler:
  enabled: false
deadlock:
  use: false
  timeout: 600
dataset:
  batch_size: 32
  num_workers: 16
  segment_duration: 10
  num_samples: 100
  return_info: false
  shuffle: false
  sample_on_duration: true
  sample_on_weight: true
  min_segment_ratio: 0.5
  train:
    num_samples: 500000
    shuffle: true
    shuffle_seed: 0
    permutation_on_files: false
  valid:
    num_samples: 10
  evaluate:
    num_samples: 10000
    batch_size: 32
  generate:
    num_samples: 5
    return_info: true
    batch_size: 2
    segment_duration: 10
checkpoint:
  save_last: true
  save_every: 1000
  keep_last: 10
  keep_every_states: null
generate:
  every: null
  path: samples
  audio:
    format: mp3
    strategy: clip
    sample_rate: ${sample_rate}
  lm:
    use_sampling: false
    temp: 1.0
    top_k: 0
    top_p: 0.0
  num_workers: 5
evaluate:
  every: null
  num_workers: 5
  truncate_audio: null
  fixed_generation_duration: null
  metrics:
    base: true
    visqol: false
    sisnr: true
optim:
  epochs: 50
  updates_per_epoch: 1000
  lr: 0.0003
  optimizer: adam
  adam:
    betas:
    - 0.5
    - 0.9
    weight_decay: 0.0
  ema:
    use: true
    updates: 1
    device: ${device}
    decay: 0.99
  max_norm: 0.0
schedule:
  lr_scheduler: null
  step:
    step_size: null
    gamma: null
  exponential:
    lr_decay: null
  cosine:
    warmup: null
    lr_min_ratio: 0.0
    cycle_length: 1.0
  polynomial_decay:
    warmup: null
    zero_lr_warmup_steps: 0
    end_lr: 0.0
    power: 1
  inverse_sqrt:
    warmup: null
    warmup_init_lr: 0.0
  linear_warmup:
    warmup: null
    warmup_init_lr: 0.0
sample_rate: 16000
channels: 1
losses:
  adv: 0.0
  feat: 0.0
  l1: 1.0
  mel: 0.0
  msspec: 0.0
  sisnr: 0.0
balancer:
  balance_grads: false
  ema_decay: 1.0
  per_batch_item: false
  total_norm: 1.0
adversarial:
  every: 1
  adversaries: []
  adv_loss: hinge
  feat_loss: l1
l1: {}
l2: {}
mrstft:
  factor_sc: 0.5
  factor_mag: 0.5
  normalized: false
mel:
  sample_rate: ${sample_rate}
  n_fft: 1024
  hop_length: 256
  win_length: 1024
  n_mels: 64
  f_min: 64
  f_max: null
  normalized: false
  floor_level: 1.0e-05
sisnr:
  sample_rate: ${sample_rate}
  segment: 5.0
msspec:
  sample_rate: ${sample_rate}
  range_start: 6
  range_end: 11
  n_mels: 64
  f_min: 64
  f_max: null
  normalized: true
  alphas: false
  floor_level: 1.0e-05
metrics:
  visqol:
    mode: audio
    bin: null
    model: tcdaudio14_aacvopus_coresv_svrnsim_n.68_g.01_c1.model
msstftd:
  in_channels: 1
  out_channels: 1
  filters: 32
  norm: weight_norm
  n_ffts:
  - 1024
  - 2048
  - 512
  - 256
  - 128
  hop_lengths:
  - 256
  - 512
  - 128
  - 64
  - 32
  win_lengths:
  - 1024
  - 2048
  - 512
  - 256
  - 128
  activation: LeakyReLU
  activation_params:
    negative_slope: 0.3
msd:
  in_channels: 1
  out_channels: 1
  scale_norms:
  - spectral_norm
  - weight_norm
  - weight_norm
  kernel_sizes:
  - 5
  - 3
  filters: 16
  max_filters: 1024
  downsample_scales:
  - 4
  - 4
  - 4
  - 4
  inner_kernel_sizes: null
  groups:
  - 4
  - 4
  - 4
  - 4
  strides: null
  paddings: null
  activation: LeakyReLU
  activation_params:
    negative_slope: 0.3
mpd:
  in_channels: 1
  out_channels: 1
  periods:
  - 2
  - 3
  - 5
  - 7
  - 11
  n_layers: 5
  kernel_size: 5
  stride: 3
  filters: 8
  filter_scales: 4
  max_filters: 1024
  activation: LeakyReLU
  activation_params:
    negative_slope: 0.3
  norm: weight_norm
compression_model: encodec
encodec:
  autoencoder: seanet
  quantizer: rvq
  sample_rate: ${sample_rate}
  channels: ${channels}
  causal: true
  renormalize: false
seanet:
  dimension: 16
  channels: ${channels}
  causal: ${encodec.causal}
  n_filters: 4
  n_residual_layers: 1
  ratios:
  - 8
  - 5
  - 4
  - 2
  activation: ELU
  activation_params:
    alpha: 1.0
  norm: weight_norm
  norm_params: {}
  kernel_size: 7
  residual_kernel_size: 3
  last_kernel_size: 7
  dilation_base: 2
  pad_mode: constant
  true_skip: true
  compress: 2
  lstm: 2
  disable_norm_outer_blocks: 0
  decoder:
    trim_right_ratio: 1.0
    final_activation: null
    final_activation_params: null
  encoder: {}
rvq:
  n_q: 32
  q_dropout: true
  bins: 1024
  decay: 0.99
  kmeans_init: true
  kmeans_iters: 50
  threshold_ema_dead_code: 2
  orthogonal_reg_weight: 0.0
  orthogonal_reg_active_codes_only: false
no_quant: {}
